@model IEnumerable<EEBank.Models.ArchiveFreeFormatDoc>

@{
    ViewBag.Title = "Архив принятых документов свободного формата";
}


<body>
    <style>

        body {
            background:url('http://ultradesktop.us/wallpaper_3840x2160/textures_background_gray_yellow_blue_ultra_3840x2160_hd-wallpaper-243053.jpg') 20% 20%;
        }
    
    </style>
    <h2>Архив принятых документов свободного формата</h2>
    <div id="modDialog" class="modal fade">
        <div id="dialogContent" class="modal-dialog"></div>
    </div>
    <p>
        @Html.ActionLink("Перейти к архиву платежных поручений", "Index", "ArchivePaymentOrders")
        |
        @Html.ActionLink("Перейти к архиву платежных требований", "Index", "ArchivePaymentRequirements")
    </p>
    <table class="table">
        <tr>
            <th>
                Дата создания
            </th>
            <th>
                ФИО отправителя
            </th>
            <th>
                Документ
            </th>
            <th>
                Меджер одобривший документ
            </th>
            <th></th>
        </tr>

        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.FreeFormatDoc.Date)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.FreeFormatDoc.Users.UserInf1.FirstOrDefault(p => p.UserID == item.FreeFormatDoc.UserID).FullName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.FreeFormatDoc.Document)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.FreeFormatDoc.FullInfManagers.FullName)
                </td>
                <td>
                    @Html.ActionLink("Просмотреть", "Details", new { id = item.ArchiveFreeFormatDocID }, new { @class = "compItem" })
                </td>
            </tr>
        }

    </table>
</body>


@section scripts
{
    <script type="text/javascript">

        $(function () {
            $.ajaxSetup({ cache: false });
            $(".compItem").click(function (e) {

                e.preventDefault();
                $.get(this.href, function (data) {
                    $('#dialogContent').html(data);
                    $('#modDialog').modal('show');
                });
            });
        })
    </script>
}
