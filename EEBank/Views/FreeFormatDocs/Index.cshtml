@model IEnumerable<EEBank.Models.FreeFormatDoc>
@using EEBank.Models;
@{
    ViewBag.Title = "Платежные поручения";
}
@{EEBankEntitie db = new EEBankEntitie();
var role = db.Users.FirstOrDefault(p => p.Email == User.Identity.Name).RoleId;
Random rn = new Random();
}
@{
    ViewBag.Title = "Документ свободного формата";
}

@section scripts
{
    <script type="text/javascript">

        $(function () {
            $.ajaxSetup({ cache: false });
            $(".compItem").click(function (e) {

                e.preventDefault();
                $.get(this.href, function (data) {
                    $('#dialogContent').html(data);
                    $('#modDialog').modal('show');
                });
            });
        })
    </script>
}
<link href="~/Content/tablestyle.css" type="text/css" rel="stylesheet">
<body>

    <div align="center" class=" wrapper">
        <h2>Документ свободного формата</h2>
        @if (role == 5)
        {
            <p>
                @Html.ActionLink("Создать новый", "Create", null, new { @class = "compItem" })

            </p>
        }
        @if (role == 7)
        {
            <p>
                @Html.ActionLink("Создать новый", "Create_by_manager", null, new { @class = "compItem" })
            </p>
        }
        <div id="modDialog" class="modal fade">
            <div id="dialogContent" class="modal-dialog"></div>
        </div>
        <div class="pricing-table group">
            @foreach (var item in Model)
            {
                int i = rn.Next(1, 4);
                string clas = "";
                if (i == 1)
                {
                    clas += "personal";
                }
                if (i == 2)
                {
                    clas += "professional";
                }
                if (i == 3)
                {
                    clas += "business";
                }



                <div class="block @clas fl">
                    <h2 class="title">Документ свободного формата</h2>
                    <div class="content">
                        <p class="price">
                            <sub>Документ: @Html.DisplayFor(modelItem => item.DocStatus.StatusName)</sub>
                        </p>
                        <p class="hint">@Html.DisplayFor(modelItem => item.Users.UserInf1.FirstOrDefault(p => p.UserID == item.UserID).FullName)</p>
                        <p class="hint">@Html.DisplayFor(modelItem => item.Date)</p>
                    </div>
                    <ul class="features">
                        <li><span class="fontawesome-cloud"></span>Сумма требования: @Html.DisplayFor(modelItem => item.Document)</li>
                        @if (item.StatusID == 4)
                        {
                            <li><span class="fontawesome-dashboard"></span>Причина отказа: @Html.DisplayFor(modelItem => item.Comment)</li>
                        }
                        else
                        {
                            <li><span><br /></span></li>
                        }
                    </ul>
                    <div class="pt-footer">
                        <p>@Html.ActionLink("Просмотреть", "Details", new { id = item.FreeFormatDocID }, new { @style = "color:#133037;", @class = "compItem" })</p>
                        @if (role == 5)
                        {
                            <p>@Html.ActionLink("Удалить", "Delete", new { id = item.FreeFormatDocID }, new { @style = "color:#133037;", @class = "compItem" })</p>

                        }
                        @if (item.StatusID == 4 || item.StatusID == 2)
                        {
                            <p>@Html.ActionLink("Редактировать", "Edit", new { id = item.FreeFormatDocID }, new { @style = "color:#133037;", @class = "compItem" })</p>

                        }
                        else
                        {
                            <p>
                                <br />
                            </p>
                        }



                    </div>
                </div>
            }

        </div>
    </div>
</body>
















